# 更新日志

## [未发布]

### ✨ 新增功能
- **DeepSeek风格思考过程展示**：对战模拟时显示AI的思考过程
  - 类似DeepSeek网页界面的展示方式
  - 支持点击标题栏折叠/展开思考内容
  - 思考框会随着内容增多自动增大（最大高度450px，超出可滚动）
  - 保留所有思考过程，不会被删除
  - 思考完成后显示"✓ 思考完成"状态，并自动折叠
  - 渐变色背景和悬浮阴影效果，视觉效果更佳

- **完整显示AI返回结果**：
  - 新增赛前战术分析板块（teamAnalysis）
  - 显示关键对位分析（keyMatchups）
  - 显示赛前预测（prediction）
  - 每场比赛显示关键因素（keyFactor）
  - FMVP显示获选理由（reason）
  - 添加精美的样式和布局

### 🔧 优化改进
- **提示词优化**：
  - 消除系统提示词和用户提示词的重复内容
  - 将战术分析维度移到系统提示词（固定部分）
  - 用户提示词只包含阵容、规则和格式（动态部分）
  - 减少约60%的用户提示词长度，提高效率

### 🧹 代码清理
- **删除未使用的接口和函数**：
  - 删除了 `simulateSingleGame()` - 单场比赛模拟函数（已废弃，现改为一次性模拟整个系列赛）
  - 删除了 `simulateGameLocalFallback()` - 单场本地模拟备用函数
  - 删除了 `displaySingleGameResult()` - 单场比赛结果显示函数
  - 删除了 `displayAIResult()` - AI结果显示函数（已由 `displaySeriesResult()` 替代）
  - 总计减少约470行未使用代码
- **当前使用的接口**：仅 `/api/simulate-series` 一个接口，负责完整BO7系列赛模拟

---

## [2.0.0] - 2024-12-11

### ✨ 新增功能

#### 多人在线对战系统
- **房间系统**: 支持创建和加入房间
- **实时同步**: WebSocket 实时同步游戏状态
- **双模式支持**: 可选择单机或多人在线模式
- **轮流选择**: 公平的轮流选队伍和球员机制
- **准备系统**: 双方准备后自动开始游戏

### 🔧 技术改进

#### 后端 (server.py)
- 集成 Flask-SocketIO 支持 WebSocket
- 新增房间管理类 `Room`
- 实现以下 WebSocket 事件:
  - `create_room` - 创建房间
  - `join_room` - 加入房间
  - `ready` - 玩家准备
  - `select_team` - 选择队伍
  - `select_player` - 选择球员
  - `skip_turn` - 跳过回合
  - `request_battle` - 请求开始对战

#### 前端 (index.html, script.js, styles.css)
- 新增房间选择界面
- 集成 Socket.IO 客户端库
- 实现游戏状态同步机制
- 改造游戏逻辑支持在线/单机双模式
- 新增房间界面样式,采用渐变色设计

#### 依赖更新 (requirements.txt)
- 新增 `flask-socketio>=5.3.0`
- 新增 `python-socketio>=5.9.0`

### 📚 文档

- 新增 `多人在线使用说明.md` - 详细的使用指南
- 新增 `CHANGELOG.md` - 更新日志

### 🎮 使用方式

1. **单机模式**: 保持原有功能,本地单人游戏
2. **多人在线**: 
   - 玩家1创建房间,获得房间号
   - 玩家2输入房间号加入
   - 双方准备后开始轮流选择球员
   - 选满后进行 AI 模拟对战

### 🔄 兼容性

- ✅ 向后兼容,不影响现有单机模式
- ✅ 支持 Hugging Face Space 部署
- ✅ 自动适配生产环境的 URL

---

## [1.0.0] - 初始版本

### 功能
- NBA 历史球星选择系统
- DeepSeek AI 智能对战模拟
- BO7 系列赛模拟
- 预算管理系统
- 双模式显示(办公/NBA)
- 球员数据管理

